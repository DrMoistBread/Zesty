@page "/menu"

@using Domain.MenuAggregate
@using Domain.MenuAggregate.Interfaces
@inject IMenuRepository MenuRepository

<div class="max-w-3xl mx-auto p-6 bg-gray-50">
    <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">Menu</h1>

    @foreach (var menu in _menus!)
    {
        <section class="mb-10">
            <!-- Category Header -->
            <h2 class="text-2xl font-semibold text-gray-700 border-b border-gray-300 pb-2 mb-4">
                @menu.Name
            </h2>

            <!-- Menu Items -->
            <div class="space-y-4">
                @foreach (var menuItem in menu.MenuItems)
                {
                    <div class="flex justify-between items-start bg-white rounded-lg shadow-sm p-4">
                        <div>
                            <h3 class="text-lg font-medium text-gray-900">@menuItem.Name</h3>
                            <p class="text-sm text-gray-600 italic">@menuItem.Ingredients</p>
                        </div>
                        <div class="text-right text-teal-700 font-semibold">
                            @menuItem.Price.Amount @menuItem.Price.Currency
                        </div>
                    </div>
                }
            </div>
        </section>
    }
</div>

@code {
    private List<Menu>? _menus;

    protected override Task OnInitializedAsync()
    {
        var seed = new MenuSeed(MenuRepository);
        seed.Seed();
        _menus = MenuRepository.ListAll();
        return base.OnInitializedAsync();
    }
}